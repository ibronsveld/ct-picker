<html>
<head>
</head>
<body>
<style>
    .container {
        background-color: #9191E9;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100vw;
        height: 100vh;
    }

</style>
<h1>Test</h1>
<button id="openPicker" onclick="openPicker()" class="button">OPEN PICKER</button>

<div id="container">

</div>
</body>
<!--<script src="https://ct-merchant-test.herokuapp.com/app.bundle.js"></script>-->
<script>

  var pickerOptions = {
    config: {
      authUri: 'https://auth.commercetools.com',
      projectKey: 'ivos-personal-project',
      credentials: {
        clientId: 'GVijKg5WUzUjZwO8v2FJNv_i',
        clientSecret: 'MoVEzWL2uAEj9Y0Zoy1F9dTIBPkXDUlk'
      },
      apiUri: 'https://api.commercetools.com',
      graphQLUri: 'https://api.commercetools.com'
    },
    mode: "embedded",
    pageSize: 20,
    language: "en",
    selectionMode: "single",
    pickerMode: "product",
    displayOptions: {
      buttons: {
        cancel: {
          enabled: false,
          text: "Save"
        },
        save: {
          enabled: false,
          text: "Save"
        }
      },
      showHeader: false,
      showPaging: false,
      showCancelButton: false,
      showSelectButton: true
    },
    // facets: {
    //   color: {
    //     name: "Color",
    //     filter: "variants.attributes.color.key",
    //     limit: 5
    //   },
    //   designer: {
    //     name: "Designer",
    //     filter: "variants.attributes.designer.key",
    //     limit: 5
    //   }
    // },
    handlers: {
      onSelect: (items) => {
        console.log('selected ', items);
      },
      onCancel: () => {
        console.log('Cancelled')
      }
    }
  };

  let ctPicker = new CTPicker(pickerOptions, document.getElementById('container'));
  // TODO: init should show with embedded
  // ctPicker.show().then((data) => {
  //   console.log(data);
  // }).catch((msg) => {
  //   if (msg === 'cancel') {
  //     console.log("user cancelled the dialog without selecting any items");
  //   } else {
  //     console.error(msg);
  //   }
  // });

  // ctPicker.init().then(() => {
  //   ctPicker.show().then((data) => {
  //     console.log(data);
  //   }).catch((msg) => {
  //     if (msg === 'cancel') {
  //       console.log("user cancelled the dialog without selecting any items");
  //     } else {
  //       console.error(msg);
  //     }
  //   });
  // });


  function openPicker() {
    ctPicker.show().then((data) => {
      console.log(data);
    }).catch((msg) => {
      if (msg === 'cancel') {
        console.log("user cancelled the dialog without selecting any items");
      } else {
        console.error(msg);
      }
    });
  }
</script>
</html>
